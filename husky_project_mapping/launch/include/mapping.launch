<?xml version="1.0"?>
<launch>

  <group ns="rtabmap">
    <node pkg="rtabmap_slam" type="rtabmap" name="rtabmap" output="log" args="--delete_db_on_start">
      
      <param name="subscribe_depth" value="false"/>
      <param name="subscribe_rgb" value="false"/>
      <param name="subscribe_scan_cloud" value="true"/>
      <param name="subscribe_scan" value="false"/>
      
      <remap from="scan_cloud" to="/velodyne_points"/>
      <remap from="odom" to="/odometry/filtered_map"/>
      
      <param name="frame_id" value="base_link"/>
      <param name="map_frame_id" value="map"/>
      <param name="odom_frame_id" value="odom"/> 
      <param name="publish_tf" value="false"/>   
      
      <param name="queue_size" value="20"/>
      <param name="approx_sync" value="true"/>
      
      <param name="Reg/Strategy" value="1"/> 
      <param name="Reg/Force3DoF" value="true"/>
      <param name="Optimizer/Slam2D" value="true"/>
      <param name="Rtabmap/PublishStats" value="true"/>
    </node>
  </group>

  <node pkg="octomap_server" type="octomap_server_node" name="octomap_server_0_1">
    <param name="resolution" value="0.1" />
    <param name="frame_id" type="string" value="map" />
    <param name="base_frame_id" type="string" value="base_link" />
    
    <param name="filter_ground" value="true"/>
    <param name="ground_filter/distance" value="0.2"/>       <param name="ground_filter/plane_distance" value="0.2"/> <param name="pointcloud_max_z" value="2.5" />            <param name="occupancy_min_z" value="0.2"/>              <param name="occupancy_max_z" value="10.0"/>
    
    <remap from="cloud_in" to="/velodyne_points" />
    <remap from="octomap_binary" to="octomap_0_1" />
  </node>

  <node pkg="octomap_server" type="octomap_server_node" name="octomap_server_0_2">
    <param name="resolution" value="0.2" />
    <param name="frame_id" type="string" value="map" />
    <param name="base_frame_id" type="string" value="base_link" />
    
    <param name="filter_ground" value="true"/>
    <param name="ground_filter/distance" value="0.2"/>
    <param name="ground_filter/plane_distance" value="0.2"/>
    <param name="pointcloud_max_z" value="2.5" />
    <param name="occupancy_min_z" value="0.2"/>
    <param name="occupancy_max_z" value="10.0"/>
    
    <remap from="cloud_in" to="/velodyne_points" />
    <remap from="octomap_binary" to="octomap_0_2" />
  </node>

  <node pkg="octomap_server" type="octomap_server_node" name="octomap_server_0_4">
    <param name="resolution" value="0.4" />
    <param name="frame_id" type="string" value="map" />
    <param name="base_frame_id" type="string" value="base_link" />
    
    <param name="filter_ground" value="true"/>
    <param name="ground_filter/distance" value="0.2"/>
    <param name="ground_filter/plane_distance" value="0.2"/>
    <param name="pointcloud_max_z" value="2.5" />
    <param name="occupancy_min_z" value="0.2"/>
    <param name="occupancy_max_z" value="10.0"/>
    
    <remap from="cloud_in" to="/velodyne_points" />
    <remap from="octomap_binary" to="octomap_0_4" />
  </node>

</launch>